<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="format-detection" content="telephone=no,email=no,adress=no" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title></title>
    <link rel="stylesheet" href="../css/main.css" />
</head>

<body style="visibility: hidden;">
    <section class="container">
        <article class="benefitsBox addAddressBox">
            <form action="" class="form_normal">
                <section class="row_form">
                    <p class="title_form">收货人姓名</p>
                    <div class="box_form">
                        <input type="text" class="input_normal" value="张顺友" readonly>
                    </div>
                    <i class="iconfontYZ iconYZ-youjiantou"></i>
                </section>
                <section class="row_form">
                    <p class="title_form">收货人手机</p>
                    <div class="box_form">
                        <input type="text" class="input_normal" value="" placeholder="请输入收货人手机 ">
                    </div>
                    <i class="iconfontYZ iconYZ-youjiantou"></i>
                </section>
                <section class="row_form">
                    <p class="title_form">所在地区</p>
                    <div class="box_form">
                        <p id="cityText" class="input_normal">点击选择所在地区</p>
                    </div>
                    <i class="iconfontYZ iconYZ-youjiantou"></i>
                </section>
                <section class="row_form">
                    <p class="title_form">详细地址</p>
                    <section class="next_row">
                        <textarea name="" maxlength="250" cols="" rows="3" class="textarea_normal" placeholder="请填写详细地址"></textarea>
                    </section>
                </section>
                <section class="row_form2">
                    <div class="mui-switch mui-switch-mini f_l"  id="mySwitch">
                        <div class="mui-switch-handle"></div>
                    </div>
                    <p class="title_form f_l">设为默认</p>
                </section>
            </form>
            <p class="add_address">保存</p>
        </article>
    </section>
    <script src="../js/jquery.min.js"></script>
    <script src="../js/mui.min.js"></script>
    <script src="../js/mui.picker.min.js"></script>
    <script src="../js/data.city.js"></script>
    <script src="../js/main.js"></script>
    <script>
        Community.pageRem();




        function getIndex(sheng,shi,qu,data){
            console.log(data);
            var arr = [];
            var tempData;
            for(var index in data) {
                if (data[index].text == sheng) {
                    arr.push(index);
                    tempData=data[index].children;
                    break;
                }
            }
            for(var index in tempData) {
                if (tempData[index].text == shi) {
                    arr.push(index);
                    tempData=tempData[index].children;
                    break;
                }
            }
            for(var index in tempData) {
                if (tempData[index].text == qu) {
                    arr.push(index);
                    break;
                }
            }
            return arr;
        }

        $(function($) {
        // 城市

            var cityPicker = new mui.PopPicker({ layer: 3 });
            cityPicker.setData(init_city_picker);

            var arr = getIndex("河北省","唐山市","开平区",init_city_picker);
            cityPicker.pickers[0].setSelectedIndex(arr[0]);
            cityPicker.pickers[1].setSelectedIndex(arr[1]);
            cityPicker.pickers[2].setSelectedIndex(arr[2]);

        $("#cityText").on("tap", function() {
            setTimeout(function() {
                cityPicker.show(function(items) {
                    //该ID为接收城市ID字段
                    var cityS = '',same = 0;
                    $.each(items, function(index, val) {
                        if(val.text) cityS += val.text;
                        cityS += ' ';
                        if(val.value){
                            if(index===0) {
                                same = val.value.substring(0,3);
                            }else{
                                if(same != val.value.substring(0,3)){
                                    same = false;
                                } 
                            }
                        }       
                    });
                    $("#cityText").addClass('cor').html(cityS);
                    console.log(items);
                    return same;
                });
            }, 200);
        });


        // 开关
        document.getElementById("mySwitch").addEventListener("toggle", function(event) {
            if (event.detail.isActive) {
                console.log("你启动了开关");
            } else {
                console.log("你关闭了开关");
            }
        })


        //提示样例
        $("body").dialog({
            text: '保存成功',
            autoclose: true,
            icon: "ok" // ok,error,point,loading
        });

    });
</script>
</body>

</html>
